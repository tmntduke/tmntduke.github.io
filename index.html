<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Tmntduke by tmntduke</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Tmntduke</h1>
      <h2 class="project-tagline">爱读书 爱音乐 爱编程</h2>
    </section>

    <section class="main-content">
      <h2>
<a id="第三方类库" class="anchor" href="#%E7%AC%AC%E4%B8%89%E6%96%B9%E7%B1%BB%E5%BA%93" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>第三方类库</h2>

<h3>
<a id="otto" class="anchor" href="#otto" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Otto</h3>

<blockquote>
<p>用于控件的解耦 不相互依赖</p>
</blockquote>

<h4>
<a id="基本用法" class="anchor" href="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>基本用法</h4>

<p>引入</p>

<pre lang="android"><code>dependencies {
  compile 'com.squareup:otto:1.3.8'
}
</code></pre>

<p>定义事件</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MessageEvent</span>{
  <span class="pl-c">/* Additional fields if needed */</span>
}</pre></div>

<p>订阅和取消</p>

<div class="highlight highlight-source-java"><pre>bus<span class="pl-k">.</span>register(<span class="pl-smi">Context</span>);<span class="pl-c">//订阅</span>
bus<span class="pl-k">.</span>unregister(<span class="pl-smi">Context</span>);<span class="pl-c">//取消订阅</span></pre></div>

<p>发布</p>

<div class="highlight highlight-source-java"><pre>bus<span class="pl-k">.</span>post(<span class="pl-k">new</span> MwssageEvent);
<span class="pl-c">//可以是@Produce注解的方法</span></pre></div>

<p>注解</p>

<p><strong><a href="https://github.com/Subscribe" class="user-mention">@Subscribe</a></strong>:这个在调用了register后有效,表示订阅了一个事件,并且方法的用 public 修饰的.方法名可以随意取,重点是参数,它是根据你的参数进行判断是那个事件</p>

<p><strong><a href="https://github.com/Produce" class="user-mention">@Produce</a></strong>注解告诉Bus该函数是一个事件产生者，产生的事件类型为该函数的返回值。post中传递的方法，返回值为定义的事件类</p>

<h4>
<a id="proguard-需要做一些额外处理防止混淆" class="anchor" href="#proguard-%E9%9C%80%E8%A6%81%E5%81%9A%E4%B8%80%E4%BA%9B%E9%A2%9D%E5%A4%96%E5%A4%84%E7%90%86%E9%98%B2%E6%AD%A2%E6%B7%B7%E6%B7%86" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>proguard 需要做一些额外处理，防止混淆</h4>

<div class="highlight highlight-source-java"><pre><span class="pl-k">-</span>keepattributes <span class="pl-k">*</span><span class="pl-smi">Annotation</span><span class="pl-k">*</span>
<span class="pl-k">-</span>keepclassmembers class <span class="pl-k">**</span> {
    @<span class="pl-smi">com.squareup.otto<span class="pl-k">.</span>Subscribe</span> <span class="pl-k">public</span> <span class="pl-k">*</span>;
    @<span class="pl-smi">com.squareup.otto<span class="pl-k">.</span>Produce</span> <span class="pl-k">public</span> <span class="pl-k">*</span>;
}</pre></div>

<blockquote>
<p><strong>otto</strong>应用在主线程中，内部没有异步线程的场景。（解决UI的通信机制 轻量级）</p>
</blockquote>

      <footer class="site-footer">

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
